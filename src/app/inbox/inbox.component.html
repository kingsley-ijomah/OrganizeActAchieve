<div class="inbox-container">
  <header class="inbox-header">
    <h1 class="inbox-title">Inbox</h1>
  </header>
  
  <div class="inbox-input-row">
    <input 
      class="inbox-input" 
      placeholder="Capture a new itemâ€¦" 
      type="text"
      [(ngModel)]="newItemText"
    />
    <button class="icon-btn mic-btn" type="button" aria-label="Record voice">
      <span class="material-icons">mic</span>
    </button>
    <button class="icon-btn add-btn" type="button" aria-label="Add item">
      <span class="material-icons">add</span>
    </button>
  </div>
  
  <button 
    class="show-list-btn" 
    type="button"
    (click)="toggleList()"
    [attr.aria-expanded]="showList"
    aria-label="Toggle inbox items list"
  >
    <span class="material-icons">{{ showList ? 'expand_less' : 'expand_more' }}</span>
    <span class="btn-text">{{ showList ? 'Hide Items' : 'Show Items' }}</span>
    <span class="item-count">{{ inboxItems.length }}</span>
  </button>

  <div class="inbox-list-container" *ngIf="showList">
    <ul class="inbox-list">
      <app-task-item
        *ngFor="let item of displayedItems"
        [item]="item"
        [isEditing]="isEditing(item.id)"
        (edit)="startEdit($event)"
        (delete)="deleteItem($event)"
        (save)="saveEdit($event)"
        (cancel)="cancelEdit()"
        (select)="openProjectSelector($event)"
      ></app-task-item>
    </ul>
    
    <app-load-more-button
      [hasMore]="hasMoreItems"
      [remainingCount]="remainingCount"
      (loadMore)="loadMore()"
    ></app-load-more-button>
  </div>

  <app-project-selector
    [isOpen]="showProjectSelector"
    [selectedItem]="selectedItem"
    [projects]="projects"
    (close)="closeProjectSelector()"
    (selectProject)="selectProject($event)"
  ></app-project-selector>

  <router-outlet></router-outlet>
</div>
